# Installation & Build Instructions

## For Developers

### Prerequisites
- Node.js 18+ and npm
- PHP 8.1+
- WordPress 6.2+ installation
- Composer (optional, for PHPCS)

### Step 1: Clone & Install Dependencies

```bash
# Clone the repository
git clone https://github.com/fredoyetayo/geo-ai.git
cd geo-ai

# Install JavaScript dependencies
npm install
```

### Step 2: Download Action Scheduler

GEO AI uses Action Scheduler for background task processing. You need to download it manually:

**Option A: Download from WordPress.org**
```bash
# Create vendor directory
mkdir -p vendor

# Download Action Scheduler
cd vendor
wget https://downloads.wordpress.org/plugin/action-scheduler.latest-stable.zip
unzip action-scheduler.latest-stable.zip
rm action-scheduler.latest-stable.zip
cd ..
```

**Option B: Use Composer**
```bash
composer require woocommerce/action-scheduler
```

**Option C: Manual Download**
1. Go to https://wordpress.org/plugins/action-scheduler/
2. Download the latest version
3. Extract to `vendor/action-scheduler/`

### Step 3: Build JavaScript Assets

```bash
# Development build (with watch mode)
npm start

# Production build (minified)
npm run build
```

This will compile:
- `src/editor.js` â†’ `build/editor.js` (Editor sidebar plugin)
- `blocks/answer-card/*` â†’ `build/answer-card/` (Answer Card block)

### Step 4: Install in WordPress

**Option A: Symlink (recommended for development)**
```bash
ln -s /path/to/geo-ai /path/to/wordpress/wp-content/plugins/geo-ai
```

**Option B: Copy**
```bash
cp -r geo-ai /path/to/wordpress/wp-content/plugins/
```

**Option C: Use wp-env (easiest)**
```bash
# Install wp-env globally
npm install -g @wordpress/env

# Start WordPress environment (from plugin directory)
npx wp-env start

# Your WordPress site will be at http://localhost:8888
# Admin: http://localhost:8888/wp-admin (admin/password)
```

### Step 5: Activate Plugin

1. Go to WordPress admin â†’ Plugins
2. Find "GEO AI (AI SEO)"
3. Click "Activate"
4. Navigate to Settings â†’ GEO AI

### Step 6: Configure

1. **Add API Key**: Get a free Gemini API key from https://makersuite.google.com/app/apikey
2. **Enter in Settings â†’ GEO AI â†’ General**
3. **Configure templates** in Titles & Meta tab
4. **Set social defaults** in Social tab
5. **Enable sitemaps** in Sitemaps tab

---

## For End Users

### Quick Install

1. **Download** the latest release `.zip` from releases page
2. **Upload** via WordPress admin: Plugins â†’ Add New â†’ Upload Plugin
3. **Activate** the plugin
4. **Configure** at Settings â†’ GEO AI

### First-Time Setup

1. Navigate to **Settings â†’ GEO AI**
2. Click **General** tab
3. Enter your **Google Gemini API Key**
4. Toggle **Auto-run Audit** if you want automatic audits
5. If using another SEO plugin, set **Compatibility Mode** to "Coexist"
6. Click **Save Changes**

### Getting a Gemini API Key

1. Go to https://makersuite.google.com/app/apikey
2. Sign in with your Google account
3. Click **Create API Key**
4. Copy the key and paste it in GEO AI settings

**Note**: The free tier includes generous limits suitable for most blogs.

---

## File Structure After Build

```
geo-ai/
â”œâ”€â”€ geo-ai.php                 # Main plugin file
â”œâ”€â”€ readme.txt                 # WordPress.org readme
â”œâ”€â”€ README.md                  # GitHub readme
â”œâ”€â”€ package.json               # NPM dependencies
â”œâ”€â”€ .gitignore                 # Git ignore rules
â”œâ”€â”€ includes/                  # PHP classes
â”‚   â”œâ”€â”€ class-geoai-*.php     # Core functionality
â”‚   â””â”€â”€ traits/
â”‚       â””â”€â”€ trait-encryption.php
â”œâ”€â”€ blocks/                    # Block source files
â”‚   â””â”€â”€ answer-card/
â”‚       â”œâ”€â”€ block.json
â”‚       â”œâ”€â”€ index.js
â”‚       â”œâ”€â”€ edit.js
â”‚       â”œâ”€â”€ save.js
â”‚       â”œâ”€â”€ style.css
â”‚       â””â”€â”€ editor.css
â”œâ”€â”€ src/                       # JavaScript source
â”‚   â””â”€â”€ editor.js             # Editor sidebar
â”œâ”€â”€ build/                     # Compiled JS (generated by npm build)
â”‚   â”œâ”€â”€ editor.js             # Built from src/
â”‚   â”œâ”€â”€ editor.asset.php      # Auto-generated
â”‚   â””â”€â”€ answer-card/          # Built block
â”œâ”€â”€ assets/                    # Static assets
â”‚   â”œâ”€â”€ admin.css
â”‚   â”œâ”€â”€ admin.js
â”‚   â”œâ”€â”€ editor.css            # Static CSS for editor
â”‚   â””â”€â”€ editor.js             # Placeholder (use build/editor.js)
â””â”€â”€ vendor/                    # Third-party libraries
    â””â”€â”€ action-scheduler/      # Downloaded separately
```

---

## Updating After Pull

```bash
# Pull latest changes
git pull origin main

# Update dependencies
npm install

# Rebuild
npm run build

# Flush WordPress rewrite rules
# In WordPress admin: Settings â†’ Permalinks â†’ Save Changes
```

---

## Running Tests

### PHP Code Standards

```bash
# Install PHPCS
composer global require "squizlabs/php_codesniffer=*"
composer global require "wp-coding-standards/wpcs"

# Configure PHPCS
phpcs --config-set installed_paths ~/.composer/vendor/wp-coding-standards/wpcs

# Run checks
phpcs --standard=WordPress includes/
```

### JavaScript Linting

```bash
# Lint JavaScript
npm run lint:js

# Lint CSS
npm run lint:css

# Auto-fix issues
npm run format
```

---

## Troubleshooting

### "Class not found" errors
**Solution**: Ensure Action Scheduler is in `vendor/action-scheduler/`

### JavaScript not loading
**Solution**: Run `npm run build` to compile assets

### Rewrite rules not working (sitemap 404)
**Solution**: Go to Settings â†’ Permalinks â†’ Save Changes

### API key not saving
**Solution**: Check file permissions on `wp-content/uploads/` or ensure sodium PHP extension is available

### Node build errors
**Solution**: Delete `node_modules/`, run `npm install` again

---

## Production Deployment

### Pre-deployment Checklist

- [ ] Run `npm run build` (production build)
- [ ] Test on staging environment
- [ ] Verify API key encryption works
- [ ] Check compatibility mode with other SEO plugins
- [ ] Test sitemaps are accessible
- [ ] Verify schema output is valid
- [ ] Run PHPCS and fix any issues
- [ ] Update version number in `geo-ai.php` and `readme.txt`

### Deploy

```bash
# Build production assets
npm run build

# Create release package
zip -r geo-ai-1.0.0.zip geo-ai/ \
  -x "*.git*" \
  -x "*node_modules*" \
  -x "*src/*" \
  -x "*.md" \
  -x "*package*.json" \
  -x "*.wp-env.json"
```

### Upload to WordPress.org

Follow the WordPress.org plugin handbook: https://developer.wordpress.org/plugins/wordpress-org/how-to-use-subversion/

---

## Support

- **Documentation**: See README.md
- **Issues**: GitHub Issues
- **Community**: WordPress.org support forums

---

**Happy coding! ðŸš€**
